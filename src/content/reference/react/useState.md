---
title: useState
---

<Intro>

`useState` роОройрпНрокродрпБ роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯро┐ро▓рпН роТро░рпБ [ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ](/learn/state-a-components-memory) роЪрпЗро░рпНроХрпНроХ роЙродро╡рпБроорпН ро░ро┐ропро╛роХрпНроЯрпН ро╣рпВроХрпН.

```js
const [state, setState] = useState(initialState)
```

</Intro>

<InlineToc />

---

## роХрпБро▒ро┐рокрпНрокрпБроХро│рпН {/*reference*/}

### `useState(initialState)` {/*usestate*/}

роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯро┐ройрпН роорпЗро▓рпН роороЯрпНроЯродрпНродро┐ро▓рпН `useState` роР роЕро┤рпИродрпНродрпБ роТро░рпБ [ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ](/learn/state-a-components-memory) роЕро▒ро┐ро╡ро┐роХрпНроХро╡рпБроорпН.

```js
import { useState } from 'react';

function MyComponent() {
  const [age, setAge] = useState(28);
  const [name, setName] = useState('Taylor');
  const [todos, setTodos] = useState(() => createTodos());
  // ...
```

ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпНроХро│рпБроХрпНроХрпБ `[something, setSomething]` роОройрпНро▒ роорпБро▒рпИропро┐ро▓рпН [роЕро░рпЗ роЯро┐ро╕рпНроЯрпНро░роХрпНроЪро░ро┐роЩрпН](https://javascript.info/destructuring-assignment) рокропройрпНрокроЯрпБродрпНродро┐ рокрпЖропро░ро┐роЯрпБро╡родрпБ ро╡ро┤роХрпНроХроорпН.

[#usage рокроХрпБродро┐ропро┐ро▓рпН роорпЗро▓рпБроорпН роЙродро╛ро░рогроЩрпНроХро│рпН роЙро│рпНро│рой.](#usage)

#### роЕро│ро╡рпБро░рпБроХрпНроХро│рпН {/*parameters*/}

* `initialState`: роЖро░роорпНрокродрпНродро┐ро▓рпН ро╕рпНроЯрпЗроЯрпН роОроирпНрод роородро┐рокрпНрокро╛роХ роЗро░рпБроХрпНроХро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒рпБ роирпАроЩрпНроХро│рпН родро░рпБро╡родрпБ. роЗродрпБ роОроирпНрод ро╡роХрпИ (type) роородро┐рокрпНрокрпБроорпН роЖроХро▓ро╛роорпН; роЖройро╛ро▓рпН роГрокроЩрпНроХрпНро╖ройрпН (function) роХрпНроХрпБ родройро┐ропро╛рой роироЯродрпНродрпИ роЙрогрпНроЯрпБ. родрпКроЯроХрпНроХ ро░рпЖрогрпНроЯро░рпН (initial render) роЖроХро┐ропродрпБроорпН роЗроирпНрод роЖро░рпНроХрпНропрпВроорпЖройрпНроЯрпН рокрпБро▒роХрпНроХрогро┐роХрпНроХрокрпНрокроЯрпБроорпН.
  * роирпАроЩрпНроХро│рпН `initialState` роЖроХ роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИ роЕройрпБрокрпНрокро┐ройро╛ро▓рпН, роЕродрпБ _роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпН_ роЖроХроХрпН роХро░рпБродрокрпНрокроЯрпБроорпН. роЕродрпБ рокро┐ропрпВро░рпН (pure) роЖроХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роОроирпНрод роЖро░рпНроХрпНропрпВроорпЖройрпНроЯрпНроХро│рпИропрпБроорпН роОроЯрпБроХрпНроХроХрпНроХрпВроЯро╛родрпБ, роорпЗро▓рпБроорпН роОроирпНрод ро╡роХрпИропро┐ройродрпБроорпН роородро┐рокрпНрокрпИ ро░ро┐роЯрпНроЯро░рпНройрпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН. роХро╛роорпНрокрпЛройрпЖройрпНроЯрпИ роЗройро┐ро╖ро▓рпИро╕рпН роЪрпЖропрпНропрпБроорпН рокрпЛродрпБ ро░ро┐ропро╛роХрпНроЯрпН роЙроЩрпНроХро│рпН роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИродрпНродрпБ, роЕродройрпН ро░ро┐роЯрпНроЯро░рпНройрпН роородро┐рокрпНрокрпИ роЖро░роорпНрок ро╕рпНроЯрпЗроЯро╛роХ роЪрпЗрооро┐роХрпНроХрпБроорпН. [роХрпАро┤рпЗ роТро░рпБ роЙродро╛ро░рогроорпН.](#avoiding-recreating-the-initial-state)

#### родро┐ро░рпБрокрпНрокрпБроорпН роородро┐рокрпНрокрпБроХро│рпН {/*returns*/}

`useState` роЗро░рогрпНроЯрпБ роородро┐рокрпНрокрпБроХро│рпН роХрпКрогрпНроЯ роТро░рпБ роЕро░рпЗро╡рпИродрпН родро┐ро░рпБрокрпНрокрпБроорпН:

1. родро▒рпНрокрпЛродрпИроп ро╕рпНроЯрпЗроЯрпН. роорпБродро▓рпН ро░рпЖрогрпНроЯро░ро┐ро▓рпН, роЗродрпБ роирпАроЩрпНроХро│рпН роХрпКроЯрпБродрпНрод `initialState` роЙроЯройрпН рокрпКро░рпБроирпНродрпБроорпН.
2. ро╕рпНроЯрпЗроЯрпНроЯрпИ рооро╛ро▒рпНро▒ро┐ рооро▒рпБрокроЯро┐ропрпБроорпН ро░рпЖрогрпНроЯро░рпН роироЯрпИрокрпЖро▒ [`set` роГрокроЩрпНроХрпНро╖ройрпН](#setstate).

#### роХро╡ройро┐роХрпНроХ ро╡рпЗрогрпНроЯро┐ропро╡рпИ {/*caveats*/}

* `useState` роТро░рпБ ро╣рпВроХрпН роОройрпНрокродро╛ро▓рпН, роЕродрпИ **роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯро┐ройрпН роорпЗро▓рпН роороЯрпНроЯродрпНродро┐ро▓рпН** роЕро▓рпНро▓родрпБ роЙроЩрпНроХро│рпН роЪрпКроирпНрод ро╣рпВроХрпНроХро│ро┐ро▓рпН роороЯрпНроЯрпБроорпЗ роЕро┤рпИроХрпНроХ роорпБроЯро┐ропрпБроорпН. ро▓рпВрокрпН роЕро▓рпНро▓родрпБ роХрогрпНроЯро┐ро╖ройрпНроХро│рпБроХрпНроХрпБро│рпН роЕро┤рпИроХрпНроХ роорпБроЯро┐ропро╛родрпБ. роЕрокрпНрокроЯро┐ родрпЗро╡рпИрокрпНрокроЯрпНроЯро╛ро▓рпН, рокрпБродро┐роп роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН роТройрпНро▒рпИ рокро┐ро░ро┐родрпНродрпБ, роЕроирпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕродро┐ро▓рпН роироХро░рпНродрпНродро╡рпБроорпН.
* ро╕рпНроЯрпНро░ро┐роХрпНроЯрпН роорпЛроЯро┐ро▓рпН (Strict Mode), ро░ро┐ропро╛роХрпНроЯрпН **роЙроЩрпНроХро│рпН роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпИ роЗро░рпБроорпБро▒рпИ** роЕро┤рпИроХрпНроХрпБроорпН; роЗродрпБ [родро▒рпНроЪрпЖропро▓ро╛рой тАЬроЗроорпНрокрпНропрпВро░ро┐роЯрпНроЯро┐тАЭропрпИ роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХ роЙродро╡](#my-initializer-or-updater-function-runs-twice) роЪрпЖропрпНропрокрпНрокроЯрпБроорпН. роЗродрпБ роЯрпЖро╡ро▓рокрпНроорпЖрогрпНроЯрпН-роХрпНроХрпБ роороЯрпНроЯрпБроорпН; рокрпБро░рпКроЯроХрпНро╖ройро┐ро▓рпН рокро╛родро┐рокрпНрокрпБ роЗро▓рпНро▓рпИ. роЙроЩрпНроХро│рпН роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпН рокро┐ропрпВро░рпН роОройрпНро▒ро╛ро▓рпН (роЕрокрпНрокроЯро┐родрпНродро╛ройрпН роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН), роЗродройро╛ро▓рпН роироЯродрпНродрпИ рокро╛родро┐роХрпНроХрокрпНрокроЯро╛родрпБ. роЕро┤рпИрокрпНрокрпБроХро│ро┐ро▓рпН роТройрпНро▒ро┐ройрпН ро╡ро┐ро│рпИро╡рпБ рокрпБро▒роХрпНроХрогро┐роХрпНроХрокрпНрокроЯрпБроорпН.

---

### `set` роГрокроЩрпНроХрпНро╖ройрпНроХро│рпН, `setSomething(nextState)` рокрпЛройрпНро▒ро╡рпИ {/*setstate*/}

`useState` родро┐ро░рпБрокрпНрокрпБроорпН `set` роГрокроЩрпНроХрпНро╖ройрпН, ро╕рпНроЯрпЗроЯрпНроЯрпИ рооро╛ро▒рпНро▒ро┐ рооро▒рпБрокроЯро┐ропрпБроорпН ро░рпЖрогрпНроЯро░рпИродрпН родрпВрогрпНроЯрпБроорпН. роирпАроЩрпНроХро│рпН роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роирпЗро░роЯро┐ропро╛роХро╡рпЛ, роЕро▓рпНро▓родрпБ роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роЕродрпИ роХрогроХрпНроХро┐роЯрпБроорпН роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИропрпЛ роЕройрпБрокрпНрокро▓ро╛роорпН:

```js
const [name, setName] = useState('Edward');

function handleClick() {
  setName('Taylor');
  setAge(a => a + 1);
  // ...
```

#### роЕро│ро╡рпБро░рпБроХрпНроХро│рпН {/*setstate-parameters*/}

* `nextState`: ро╕рпНроЯрпЗроЯрпН роОродрпБро╡ро╛роХ роЗро░рпБроХрпНроХро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒рпБ роирпАроЩрпНроХро│рпН родро░рпБроорпН роородро┐рокрпНрокрпБ. роОроирпНрод ро╡роХрпИропрпБроорпН роЖроХро▓ро╛роорпН; роЖройро╛ро▓рпН роГрокроЩрпНроХрпНро╖ройрпНроХро│рпБроХрпНроХрпБ родройро┐ропро╛рой роироЯродрпНродрпБ роЙрогрпНроЯрпБ.
  * роирпАроЩрпНроХро│рпН `nextState` роЖроХ роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИ роЕройрпБрокрпНрокро┐ройро╛ро▓рпН, роЕродрпБ _роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпН_ роЖроХроХрпН роХро░рпБродрокрпНрокроЯрпБроорпН. роЕродрпБ рокро┐ропрпВро░рпН роЖроХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роТро░рпЗ роЖро░рпНроХрпНропрпВроорпЖройрпНроЯрпН роЖроХ рокрогрпНроЯро┐роЩрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ (pending state) роороЯрпНроЯрпБроорпН роОроЯрпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роорпЗро▓рпБроорпН роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ ро░ро┐роЯрпНроЯро░рпНройрпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН. ро░ро┐ропро╛роХрпНроЯрпН роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпИ роХрпНропрпВро╡ро┐ро▓рпН ро╡рпИродрпНродрпБ, роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯрпИ рооро▒рпБрокроЯро┐ропрпБроорпН ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНропрпБроорпН. роЕроЯрпБродрпНрод ро░рпЖрогрпНроЯро░ро┐ро▓рпН, роХрпНропрпВро╡ро┐ро▓рпН роЙро│рпНро│ роОро▓рпНро▓ро╛ роЕрокрпНроЯрпЗроЯро░рпНроХро│рпИропрпБроорпН роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН рокропройрпНрокроЯрпБродрпНродро┐ роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роХрогроХрпНроХро┐роЯрпБроорпН. [роХрпАро┤рпЗ роЙродро╛ро░рогроорпН.](#updating-state-based-on-the-previous-state)

#### родро┐ро░рпБрокрпНрокрпБроорпН роородро┐рокрпНрокрпБ {/*setstate-returns*/}

`set` роГрокроЩрпНроХрпНро╖ройрпНроХро│рпБроХрпНроХрпБ ро░ро┐роЯрпНроЯро░рпНройрпН роородро┐рокрпНрокрпБ роЗро▓рпНро▓рпИ.

#### роХро╡ройро┐роХрпНроХ ро╡рпЗрогрпНроЯро┐ропро╡рпИ {/*setstate-caveats*/}

* `set` роГрокроЩрпНроХрпНро╖ройрпН **роЕроЯрпБродрпНрод ро░рпЖрогрпНроЯро░рпБроХрпНроХро╛рой ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ роороЯрпНроЯрпБроорпЗ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНроХро┐ро▒родрпБ**. `set` роР роЕро┤рпИродрпНродро╡рпБроЯройрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ ро╡ро╛роЪро┐родрпНродро╛ро▓рпН, [роЗройрпНройрпБроорпН рокро┤рпИроп роородро┐рокрпНрокрпЗ роХро┐роЯрпИроХрпНроХрпБроорпН](#ive-updated-the-state-but-logging-gives-me-the-old-value) тАФ роЕродро╛ро╡родрпБ роЕро┤рпИрокрпНрокрпБроХрпНроХрпБ роорпБройрпН родро┐ро░рпИропро┐ро▓рпН роЗро░рпБроирпНрод роородро┐рокрпНрокрпБ.

* роирпАроЩрпНроХро│рпН роХрпКроЯрпБроХрпНроХрпБроорпН рокрпБродро┐роп роородро┐рокрпНрокрпБ, родро▒рпНрокрпЛродрпИроп `state` роЙроЯройрпН [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) роТрокрпНрокрпАроЯрпНроЯро┐ройрпНрокроЯро┐ роорпБро┤рпБроХрпН роХрпВроЯрпБродро▓рпН (identical) роОройрпНро▒ро╛ро▓рпН, ро░ро┐ропро╛роХрпНроЯрпН **роЕроирпНрод роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН рооро▒рпНро▒рпБроорпН роЕродройрпН роЪрпИро▓рпНроЯрпНроХро│рпИ ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНро╡родрпИродрпН родро╡ро┐ро░рпНродрпНродрпБ ро╡ро┐роЯрпБроорпН.** роЗродрпБ роТро░рпБ роЖрокрпНроЯро┐роорпИроЪрпЖро╖ройрпН.

* ро░ро┐ропро╛роХрпНроЯрпН [ро╕рпНроЯрпЗроЯрпН роЕрокрпНроЯрпЗроЯрпНроХро│рпИ рокрпЗроЯрпНроЪрпН роЪрпЖропрпНроХро┐ро▒родрпБ.](/learn/queueing-a-series-of-state-updates) роЕродро╛ро╡родрпБ **роЕройрпИродрпНродрпБ роЗро╡рпЖройрпНроЯрпН ро╣ро╛рогрпНроЯрпНро▓ро░рпНроХро│рпН роорпБроЯро┐роирпНродрпБ** роЕро╡ро░рпНроХро│рпН `set` роГрокроЩрпНроХрпНро╖ройрпНроХро│рпИ роЕро┤рпИродрпНрод рокро┐ройрпН родро╛ройрпН родро┐ро░рпИропрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроорпН. роЗродройро╛ро▓рпН роТро░рпБ роЪро┐роЩрпНроХро┐ро│рпН роЗро╡рпЖройрпНроЯро┐ро▓рпН рокро▓ ро░рпЖрогрпНроЯро░рпНроХро│рпИродрпН родро╡ро┐ро░рпНроХрпНроХро▓ро╛роорпН. роЕро░ро┐родро╛роХ, роирпАроЩрпНроХро│рпН родро┐ро░рпИропрпИ роЙроЯройроЯро┐ропро╛роХ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропродрпН родро┐рогро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпЖройро┐ро▓рпН (роЙродро╛ро░рогрооро╛роХ DOM роР роЕрогрпБроХ), [`flushSync`](/reference/react-dom/flushSync) рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.

* `set` роГрокроЩрпНроХрпНро╖ройро┐ройрпН роЕроЯрпИропро╛ро│роорпН (identity) ро╕рпНроЯрпЗрокро┐ро│рпН. роЕродройро╛ро▓рпН роЕродрпБ Effect роЯрпЖрокрпЖрогрпНроЯрпЖройрпНро╕ро┐роХро│ро┐ро▓рпН рокро▓ роирпЗро░роЩрпНроХро│ро┐ро▓рпН ро╡ро┐ро▓роХрпНроХрокрпНрокроЯрпБроорпН. роЕродрпИ роЪрпЗро░рпНродрпНродро╛ро▓рпБроорпН Effect родрпЗро╡рпИропро┐ро▓рпНро▓ро╛рооро▓рпН роГрокропро░рпН роЖроХро╛родрпБ. ро▓ро┐ройрпНроЯро░рпН роПродрпЗройрпБроорпН роЯрпЖрокрпЖрогрпНроЯрпЖройрпНро╕ро┐ропрпИ рокро┐ро┤рпИропро┐ро▓рпНро▓ро╛рооро▓рпН ро╡ро┐роЯрпНроЯрпБ ро╡ро┐роЯ роЕройрпБроородро┐родрпНродро╛ро▓рпН, роЕродрпБ рокро╛родрпБроХро╛рокрпНрокро╛ройродрпЗ. [Effect роЯрпЖрокрпЖрогрпНроЯрпЖройрпНро╕ро┐роХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ роХрпБро▒рпИрокрпНрокродрпБ роОройрпНрокродрпИрокрпН рокроЯро┐роХрпНроХро╡рпБроорпН.](/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect)

* ро░рпЖрогрпНроЯро░рпН роЖроХрпБроорпН роирпЗро░родрпНродро┐ро▓рпН `set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИрокрпНрокродрпБ, родро▒рпНрокрпЛродрпИроп ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНропрокрпНрокроЯрпБроорпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯрпБроХрпНроХрпБ роороЯрпНроЯрпБроорпН роЕройрпБроородро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. ро░ро┐ропро╛роХрпНроЯрпН роЕроирпНрод роЕро╡рпБроЯрпНрокрпБроЯрпНроЯрпИ роХро┤ро┐родрпНродрпБ, рокрпБродро┐роп ро╕рпНроЯрпЗроЯрпНроЯрпБроЯройрпН роЙроЯройрпЗ роорпАрогрпНроЯрпБроорпН ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНропрпБроорпН. роЗродрпБ роЕро░ро┐родро╛роХро╡рпЗ родрпЗро╡рпИрокрпНрокроЯрпБроорпН; роЗро░рпБроирпНродро╛ро▓рпБроорпН **роорпБроирпНродрпИроп ро░рпЖрогрпНроЯро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ родроХро╡ро▓рпИ роЪрпЗрооро┐роХрпНроХ** роЗродрпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. [роХрпАро┤рпЗ роЙродро╛ро░рогроорпН.](#storing-information-from-previous-renders)

* ро╕рпНроЯрпНро░ро┐роХрпНроЯрпН роорпЛроЯро┐ро▓рпН, ро░ро┐ропро╛роХрпНроЯрпН **роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпИ роЗро░рпБроорпБро▒рпИ** роЕро┤рпИроХрпНроХрпБроорпН тАФ [родро▒рпНроЪрпЖропро▓ро╛рой тАЬроЗроорпНрокрпНропрпВро░ро┐роЯрпНроЯро┐тАЭроХро│рпИ роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХ роЙродро╡](#my-initializer-or-updater-function-runs-twice). роЗродрпБ роЯрпЖро╡ро▓рокрпНроорпЖрогрпНроЯро┐ро▓рпН роороЯрпНроЯрпБроорпЗ роироЯроХрпНроХрпБроорпН; рокрпБро░рпКроЯроХрпНро╖ройро┐ро▓рпН рокро╛родро┐рокрпНрокрпБ роЗро▓рпНро▓рпИ. роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпН рокро┐ропрпВро░рпН роОройрпНро▒ро╛ро▓рпН роироЯродрпНродрпИ рокро╛родро┐роХрпНроХро╛родрпБ. роЗро░рогрпНроЯрпБ роЕро┤рпИрокрпНрокрпБроХро│ро┐ро▓рпН роТройрпНро▒ро┐ройрпН ро╡ро┐ро│рпИро╡рпБ рокрпБро▒роХрпНроХрогро┐роХрпНроХрокрпНрокроЯрпБроорпН.

---

## рокропройрпНрокро╛роЯрпБ {/*usage*/}

### роТро░рпБ роХро╛роорпНрокрпЛройрпЖройрпНроЯро┐ро▓рпН ро╕рпНроЯрпЗроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНрокрпНрокродрпБ {/*adding-state-to-a-component*/}

роТро░рпБ роЕро▓рпНро▓родрпБ роЕродро▒рпНроХрпБ роорпЗро▒рпНрокроЯрпНроЯ [ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпНроХро│рпИ](/learn/state-a-components-memory) роЕро▒ро┐ро╡ро┐роХрпНроХ роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯро┐ройрпН роорпЗро▓рпН роороЯрпНроЯродрпНродро┐ро▓рпН `useState` роР роЕро┤рпИроХрпНроХро╡рпБроорпН.

```js [[1, 4, "age"], [2, 4, "setAge"], [3, 4, "42"], [1, 5, "name"], [2, 5, "setName"], [3, 5, "'Taylor'"]]
import { useState } from 'react';

function MyComponent() {
  const [age, setAge] = useState(42);
  const [name, setName] = useState('Taylor');
  // ...
```

ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпНроХро│рпБроХрпНроХрпБ `[something, setSomething]` роОройрпНро▒ рокрпЖропро░ро┐роЯрпБроорпН роорпБро▒рпИропрпИ [роЕро░рпЗ роЯро┐ро╕рпНроЯрпНро░роХрпНроЪро░ро┐роЩрпН](https://javascript.info/destructuring-assignment) роорпВро▓роорпН рокро┐ройрпНрокро▒рпНро▒рпБро╡родрпБ ро╡ро┤роХрпНроХроорпН.

`useState` роиро┐ро░рпНро╡роХро┐роХрпНроХрпБроорпН роЗроирпНрод ро╕рпНроЯрпЗроЯрпНроЯро┐ро▒рпНроХрпБ роЗро░рогрпНроЯрпБ рокрпКро░рпБроЯрпНроХро│рпН роХрпКрогрпНроЯ роЕро░рпЗ родро┐ро░рпБроорпНрокрпБроорпН:

1. роЗроирпНрод ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│ро┐ройрпН <CodeStep step={1}>родро▒рпНрокрпЛродрпИроп ро╕рпНроЯрпЗроЯрпН</CodeStep> тАФ <CodeStep step={3}>роЖро░роорпНрок ро╕рпНроЯрпЗроЯрпН</CodeStep> роорпВро▓роорпН родрпКроЯроЩрпНроХрпБроорпН.
2. роЗроЯрпИроорпБроХ родрпКроЯро░рпНрокрпБроХро│рпБроХрпНроХрпБрокрпН рокродро┐ро▓ро│ро┐роХрпНроХ роЕродрпИ рооро╛ро▒рпНро▒ роЙродро╡рпБроорпН <CodeStep step={2}>`set` роГрокроЩрпНроХрпНро╖ройрпН</CodeStep>.

родро┐ро░рпИропро┐ро▓рпН роХро╛рогрпНрокродрпИ рооро╛ро▒рпНро▒, `set` роГрокроЩрпНроХрпНро╖ройрпИ роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпБроЯройрпН роЕро┤рпИроХрпНроХро╡рпБроорпН:

```js [[2, 2, "setName"]]
function handleClick() {
  setName('Robin');
}
```

ро░ро┐ропро╛роХрпНроЯрпН роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роЪрпЗрооро┐родрпНродрпБ, рокрпБродро┐роп роородро┐рокрпНрокрпБроХро│рпБроЯройрпН роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯрпИ роорпАрогрпНроЯрпБроорпН ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНродрпБ UI-роР роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроорпН.

<Pitfall>

`set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИрокрпНрокродрпБ [роПро▒рпНроХройро╡рпЗ роЗропроЩрпНроХро┐роХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХрпБроорпН роХрпЛроЯро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН родро▒рпНрокрпЛродрпИроп ро╕рпНроЯрпЗроЯрпНроЯрпИ **рооро╛ро▒рпНро▒ро╛родрпБ**](#ive-updated-the-state-but-logging-gives-me-the-old-value):

```js {3}
function handleClick() {
  setName('Robin');
  console.log(name); // Still "Taylor"!
}
```

роЗроирпНрод рооро╛ро▒рпНро▒роорпН *роЕроЯрпБродрпНрод* ро░рпЖрогрпНроЯро░рпН роорпБродро▓рпН `useState` родро┐ро░рпБрокрпНрокрпБроорпН роородро┐рокрпНрокро┐ро▓рпН роороЯрпНроЯрпБроорпЗ рокро┐ро░родро┐рокро▓ро┐роХрпНроХрпБроорпН.

</Pitfall>

<Recipes titleText="роЕроЯро┐рокрпНрокроЯрпИ useState роЙродро╛ро░рогроЩрпНроХро│рпН" titleId="examples-basic">

#### роХро╡рпБрогрпНроЯро░рпН (роОрогрпН) {/*counter-number*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, `count` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпН роТро░рпБ роОрогрпНрогрпИ ро╡рпИродрпНродро┐ро░рпБроХрпНроХро┐ро▒родрпБ. рокроЯрпНроЯройрпИ роЪрпКроЯрпБроХрпНроХрпБроорпНрокрпЛродрпБ роЕродрпБ роТро░рпБ ропрпВройро┐роЯрпНроЯро╛ро▓рпН роЕродро┐роХро░ро┐роХрпНроХрпБроорпН.

<Sandpack>

```js
import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount(count + 1);
  }

  return (
    <button onClick={handleClick}>
      You pressed me {count} times
    </button>
  );
}
```

</Sandpack>

<Solution />

#### роЙро░рпИ рокрпБро▓роорпН (ро╕рпНроЯрпНро░ро┐роЩрпН) {/*text-field-string*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, `text` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпН роТро░рпБ ро╕рпНроЯрпНро░ро┐роЩрпНроХрпИ ро╡рпИродрпНродро┐ро░рпБроХрпНроХро┐ро▒родрпБ. роирпАроЩрпНроХро│рпН родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропрпБроорпНрокрпЛродрпБ, `handleChange` рокрпНро░ро╡рпБроЪро░рпН роЗройрпНрокрпБроЯрпН DOM роОро▓ро┐роорпЖройрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роЪроорпАрокродрпНродро┐роп роородро┐рокрпНрокрпИ ро╡ро╛роЪро┐родрпНродрпБ, ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНроп `setText` роР роЕро┤рпИроХрпНроХрпБроорпН. роЗродройро╛ро▓рпН родро▒рпНрокрпЛродрпИроп `text` роР роХрпАро┤рпЗ роХро╛роЯрпНроЯ роорпБроЯро┐ропрпБроорпН.

<Sandpack>

```js
import { useState } from 'react';

export default function MyInput() {
  const [text, setText] = useState('hello');

  function handleChange(e) {
    setText(e.target.value);
  }

  return (
    <>
      <input value={text} onChange={handleChange} />
      <p>You typed: {text}</p>
      <button onClick={() => setText('hello')}>
        Reset
      </button>
    </>
  );
}
```

</Sandpack>

<Solution />

#### роЪрпЖроХрпНрокро╛роХрпНро╕рпН (рокрпВро▓ро┐ропройрпН) {/*checkbox-boolean*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, `liked` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпН роТро░рпБ рокрпВро▓ро┐ропройрпН роородро┐рокрпНрокрпИ ро╡рпИродрпНродро┐ро░рпБроХрпНроХро┐ро▒родрпБ. роирпАроЩрпНроХро│рпН роЗройрпНрокрпБроЯрпН-роР роЪрпКроЯрпБроХрпНроХрпБроорпНрокрпЛродрпБ, рокрпНро░ро╡рпБроЪро░рпН роЪрпЖроХрпНрокро╛роХрпНро╕рпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХрокрпНрокроЯрпНроЯродро╛ роОройрпНрокродрпИ ро╡рпИродрпНродрпБ `setLiked` `liked` ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроорпН. роЕроирпНрод `liked` роородро┐рокрпНрокрпБ роЪрпЖроХрпНрокро╛роХрпНро╕ро┐ройрпН роХрпАро┤рпЗ роЙро│рпНро│ роЙро░рпИропрпИ ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНроп рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН.

<Sandpack>

```js
import { useState } from 'react';

export default function MyCheckbox() {
  const [liked, setLiked] = useState(true);

  function handleChange(e) {
    setLiked(e.target.checked);
  }

  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={liked}
          onChange={handleChange}
        />
        I liked this
      </label>
      <p>You {liked ? 'liked' : 'did not like'} this.</p>
    </>
  );
}
```

</Sandpack>

<Solution />

#### рокроЯро┐ро╡роорпН (роЗро░рогрпНроЯрпБ ро╡рпЖро░ро┐ропрокро┐ро│рпНроХро│рпН) {/*form-two-variables*/}

роТро░рпЗ роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯро┐ро▓рпН роТройрпНро▒рпБроХрпНроХрпБ роорпЗро▒рпНрокроЯрпНроЯ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпНроХро│рпИ роЕро▒ро┐ро╡ро┐роХрпНроХро▓ро╛роорпН. роТро╡рпНро╡рпКро░рпБ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпБроорпН роорпБро▒рпНро▒ро┐ро▓рпБроорпН роЪрпБропро╛родрпАройрооро╛ройродрпБ.

<Sandpack>

```js
import { useState } from 'react';

export default function Form() {
  const [name, setName] = useState('Taylor');
  const [age, setAge] = useState(42);

  return (
    <>
      <input
        value={name}
        onChange={e => setName(e.target.value)}
      />
      <button onClick={() => setAge(age + 1)}>
        Increment age
      </button>
      <p>Hello, {name}. You are {age}.</p>
    </>
  );
}
```

```css
button { display: block; margin-top: 10px; }
```

</Sandpack>

<Solution />

</Recipes>

---

### роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯрпБ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ {/*updating-state-based-on-the-previous-state*/}

`age` `42` роОройрпНро▒рпБ роХрпКро│рпНро╡рпЛроорпН. роЗроирпНрод ро╣ро╛рогрпНроЯрпНро▓ро░рпН `setAge(age + 1)` роР роорпВройрпНро▒рпБ роорпБро▒рпИ роЕро┤рпИроХрпНроХро┐ро▒родрпБ:

```js
function handleClick() {
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
  setAge(age + 1); // setAge(42 + 1)
}
```

роЖройро╛ро▓рпН, роТро░рпБ роорпБро▒рпИ роЪрпКроЯрпБроХрпНроХро┐роп рокро┐ро▒роХрпБ, `age` `45` роЖроХро╛рооро▓рпН `43` роЖроХ роороЯрпНроЯрпБроорпЗ роЗро░рпБроХрпНроХрпБроорпН! роХро╛ро░рогроорпН, `set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИрокрпНрокродрпБ роПро▒рпНроХройро╡рпЗ роУроЯро┐роХрпНроХрпКрогрпНроЯро┐ро░рпБроХрпНроХрпБроорпН роХрпЛроЯро┐ро▓рпН роЙро│рпНро│ `age` ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ [роЕрокрпНрокрпЛродрпЗ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропро╛родрпБ](/learn/state-as-a-snapshot). роЖроХро╡рпЗ роТро╡рпНро╡рпКро░рпБ `setAge(age + 1)` роЕро┤рпИрокрпНрокрпБроорпН `setAge(43)` роЖроХро┐ро╡ро┐роЯрпБроХро┐ро▒родрпБ.

роЗродро▒рпНроХрпБ родрпАро░рпНро╡ро╛роХ, роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роирпЗро░роЯро┐ропро╛роХ роЕройрпБрокрпНрокрпБро╡родро▒рпНроХрпБ рокродро┐ро▓ро╛роХ, **роТро░рпБ *роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпИ*** `setAge` роХрпНроХрпБ роЕройрпБрокрпНрокро▓ро╛роорпН:

```js [[1, 2, "a", 0], [2, 2, "a + 1"], [1, 3, "a", 0], [2, 3, "a + 1"], [1, 4, "a", 0], [2, 4, "a + 1"]]
function handleClick() {
  setAge(a => a + 1); // setAge(42 => 43)
  setAge(a => a + 1); // setAge(43 => 44)
  setAge(a => a + 1); // setAge(44 => 45)
}
```

роЗроЩрпНроХрпБ `a => a + 1` роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпН. роЕродрпБ <CodeStep step={1}>рокрогрпНроЯро┐роЩрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ</CodeStep> роОроЯрпБродрпНродрпБ роЕродро┐ро▓ро┐ро░рпБроирпНродрпБ <CodeStep step={2}>роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ</CodeStep> роХрогроХрпНроХро┐роЯрпБроХро┐ро▒родрпБ.

ро░ро┐ропро╛роХрпНроЯрпН роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпНроХро│рпИ роТро░рпБ [роХрпНропрпВро╡ро┐ро▓рпН](/learn/queueing-a-series-of-state-updates) ро╡рпИроХрпНроХрпБроорпН. роЕроЯрпБродрпНрод ро░рпЖрогрпНроЯро░ро┐ро▓рпН, роЕродрпЗ ро╡ро░ро┐роЪрпИропро┐ро▓рпН роЕро╡ро▒рпНро▒рпИ роЕро┤рпИроХрпНроХрпБроорпН:

1. `a => a + 1` роХрпНроХрпБ рокрогрпНроЯро┐роЩрпН ро╕рпНроЯрпЗроЯро╛роХ `42` роХро┐роЯрпИроХрпНроХрпБроорпН; роЕродрпБ роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯро╛роХ `43` роР ро░ро┐роЯрпНроЯро░рпНройрпН роЪрпЖропрпНропрпБроорпН.
1. `a => a + 1` роХрпНроХрпБ рокрогрпНроЯро┐роЩрпН `43`; роЕроЯрпБродрпНродродрпБ `44`.
1. `a => a + 1` роХрпНроХрпБ рокрогрпНроЯро┐роЩрпН `44`; роЕроЯрпБродрпНродродрпБ `45`.

ро╡рпЗро▒рпБ роЕрокрпНроЯрпЗроЯрпНроХро│рпН роХрпНропрпВро╡ро┐ро▓рпН роЗро▓рпНро▓ро╛родродро╛ро▓рпН, роЗро▒рпБродро┐ропро┐ро▓рпН ро░ро┐ропро╛роХрпНроЯрпН `45` роР родро▒рпНрокрпЛродрпИроп ро╕рпНроЯрпЗроЯро╛роХ роЪрпЗрооро┐роХрпНроХрпБроорпН.

ро╡ро┤роХрпНроХрооро╛роХ, рокрогрпНроЯро┐роЩрпН ро╕рпНроЯрпЗроЯрпН роЖро░рпНроХрпНропрпВроорпЖройрпНроЯрпНроЯро┐ро▒рпНроХрпБ роЕроирпНрод ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│ро┐ройрпН роорпБродро▓рпН роОро┤рпБродрпНродрпИ рокрпЖропро░ро╛роХ (роЙродро╛: `age` роХрпНроХрпБ `a`) рокропройрпНрокроЯрпБродрпНродрпБро╡ро╛ро░рпНроХро│рпН. роЗро▓рпНро▓рпИ роОройрпНро▒ро╛ро▓рпН `prevAge` рокрпЛройрпНро▒ родрпЖро│ро┐ро╡ро╛рой рокрпЖропро░рпИропрпБроорпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.

роЯрпЖро╡ро▓рокрпНроорпЖрогрпНроЯро┐ро▓рпН роЕро╡рпИ [рокро┐ропрпВро░рпН](/learn/keeping-components-pure) роОройрпНрокродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод ро░ро┐ропро╛роХрпНроЯрпН [роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпНроХро│рпИ роЗро░рпБроорпБро▒рпИ роЕро┤рпИроХрпНроХро▓ро╛роорпН](#my-initializer-or-updater-function-runs-twice).

<DeepDive>

#### роОрокрпНрокрпЛродрпБроорпН роЕрокрпНроЯрпЗроЯро░рпИрокрпН рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБрооро╛? {/*is-using-an-updater-always-preferred*/}

роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ рокрпБродро┐роп ро╕рпНроЯрпЗроЯрпНроЯрпИ роХрогроХрпНроХро┐роЯрпБроорпНрокрпЛродрпБ `setAge(a => a + 1)` рокрпЛро▓ роОрокрпНрокрпЛродрпБроорпН роОро┤рпБрод ро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒ рокро░ро┐роирпНродрпБро░рпИропрпИ роирпАроЩрпНроХро│рпН роХрпЗроЯрпНроХро▓ро╛роорпН. роЗродро┐ро▓рпН родрпАроЩрпНроХрпБ роПродрпБроорпН роЗро▓рпНро▓рпИ; роЖройро╛ро▓рпН роОрокрпНрокрпЛродрпБроорпН роЕро╡роЪро┐ропроорпБрооро┐ро▓рпНро▓рпИ.

рокро▓ роЪрооропроЩрпНроХро│ро┐ро▓рпН, роЗро░рпБ роорпБро▒рпИроХро│ро┐ро▓рпБроорпН рокрпЖро░ро┐роп ро╡ро┐родрпНродро┐ропро╛роЪроорпН роЗро░рпБроХрпНроХро╛родрпБ. родро┐роЯрпНроЯрооро┐роЯрпНроЯ ропрпВроЪро░рпН роЪрпЖропро▓рпНроХро│ро┐ро▓рпН (роЙродро╛: роХро┐ро│ро┐роХрпН), роЕроЯрпБродрпНрод роХро┐ро│ро┐роХрпНроХро┐ро▒рпНроХрпБ роорпБройрпН `age` ро╕рпНроЯрпЗроЯрпН роЕрокрпНроЯрпЗроЯрпН роЖроХро┐ропро┐ро░рпБроХрпНроХрпБроорпН роОройрпНрокродрпИ ро░ро┐ропро╛роХрпНроЯрпН роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродрпБроорпН. роЕродройро╛ро▓рпН ро╣ро╛рогрпНроЯрпНро▓ро░рпН родрпКроЯроХрпНроХродрпНродро┐ро▓рпН тАЬро╕рпНроЯрпЗро▓рпНтАЭ `age` рокро╛ро░рпНроХрпНроХрпБроорпН роЖрокродрпНродрпБ роЗро▓рпНро▓рпИ.

роЖройро╛ро▓рпН роТро░рпЗ роЗро╡рпЖройрпНроЯро┐ро▓рпН рокро▓ роЕрокрпНроЯрпЗроЯрпНроХро│рпН роЪрпЖропрпНродро╛ро▓рпН, роЕрокрпНроЯрпЗроЯро░рпНроХро│рпН роЙродро╡ро┐роХро░рооро╛ройро╡рпИ. ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ роирпЗро░роЯро┐ропро╛роХ роЕрогрпБроХрпБро╡родрпИродрпН родро╡ро┐ро░рпНроХрпНроХ ро╡рпЗрогрпНроЯро┐роп роЖрокрпНроЯро┐роорпИроЪрпЗро╖ройрпНроХро│ро┐ро▓рпН роЗродрпБро╡рпБроорпН ро╡роЪродро┐ропро╛роХ роЗро░рпБроХрпНроХрпБроорпН.

родрпКроЯро░рпНроЪрпНроЪро┐ропро╛рой ро╕рпНроЯрпИро▓рпИ (consistency) ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН, роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роХрогроХрпНроХро┐роЯрпБроорпН роирпЗро░роЩрпНроХро│ро┐ро▓рпН роОрокрпНрокрпЛродрпБроорпН роЕрокрпНроЯрпЗроЯро░рпИ роОро┤рпБродрпБро╡родрпБ роиро┐ропро╛ропроорпН. ро╡рпЗро▒рпБ роТро░рпБ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│ро┐ройрпН роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роХрогроХрпНроХро┐роЯ ро╡рпЗрогрпНроЯрпБрооро╛ройро╛ро▓рпН, роЕро╡ро▒рпНро▒рпИ роТро░рпЗ роЖрокрпНроЬрпЖроХрпНроЯро╛роХ роЗрогрпИродрпНродрпБ [роТро░рпБ ро░рпЖроЯрпНропрпВроЪро░рпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.](/learn/extracting-state-logic-into-a-reducer)

</DeepDive>

<Recipes titleText="роЕрокрпНроЯрпЗроЯро░рпИ роЕройрпБрокрпНрокрпБро╡родрпБ vs роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роирпЗро░роЯро┐ропро╛роХ роЕройрпБрокрпНрокрпБро╡родрпБ" titleId="examples-updater">

#### роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпИ роЕройрпБрокрпНрокрпБро╡родрпБ {/*passing-the-updater-function*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпН роЕройрпБрокрпНрокрокрпНрокроЯрпБро╡родро╛ро▓рпН "+3" рокроЯрпНроЯройрпН роЪро░ро┐ропро╛роХ роЪрпЖропро▓рпНрокроЯрпБроорпН.

<Sandpack>

```js
import { useState } from 'react';

export default function Counter() {
  const [age, setAge] = useState(42);

  function increment() {
    setAge(a => a + 1);
  }

  return (
    <>
      <h1>Your age: {age}</h1>
      <button onClick={() => {
        increment();
        increment();
        increment();
      }}>+3</button>
      <button onClick={() => {
        increment();
      }}>+1</button>
    </>
  );
}
```

```css
button { display: block; margin: 10px; font-size: 20px; }
h1 { display: block; margin: 10px; }
```

</Sandpack>

<Solution />

#### роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роирпЗро░роЯро┐ропро╛роХ роЕройрпБрокрпНрокрпБро╡родрпБ {/*passing-the-next-state-directly*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпН **роЕройрпБрокрпНрокрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ**, роЕродройро╛ро▓рпН "+3" рокроЯрпНроЯройрпН **роОродро┐ро░рпНрокро╛ро░рпНродрпНродрокроЯро┐ роЪрпЖропро▓рпНрокроЯро╛родрпБ**.

<Sandpack>

```js
import { useState } from 'react';

export default function Counter() {
  const [age, setAge] = useState(42);

  function increment() {
    setAge(age + 1);
  }

  return (
    <>
      <h1>Your age: {age}</h1>
      <button onClick={() => {
        increment();
        increment();
        increment();
      }}>+3</button>
      <button onClick={() => {
        increment();
      }}>+1</button>
    </>
  );
}
```

```css
button { display: block; margin: 10px; font-size: 20px; }
h1 { display: block; margin: 10px; }
```

</Sandpack>

<Solution />

</Recipes>

---

### ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИропрпБроорпН роЕро░рпЗроХро│рпИропрпБроорпН роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ {/*updating-objects-and-arrays-in-state*/}

ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИропрпБроорпН роЕро░рпЗроХро│рпИропрпБроорпН ро╡рпИродрпНродро┐ро░рпБроХрпНроХро▓ро╛роорпН. ро░ро┐ропро╛роХрпНроЯро┐ро▓рпН ро╕рпНроЯрпЗроЯрпН ро░рпАроЯрпН-роТрогрпНро▓ро┐ роОройроХрпН роХро░рпБродрокрпНрокроЯрпБроХро┐ро▒родрпБ; роОройро╡рпЗ **роЗро░рпБроХрпНроХрпБроорпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИ *роорпНропрпВроЯрпНроЯрпЗроЯрпН* роЪрпЖропрпНро╡родро▒рпНроХрпБрокрпН рокродро┐ро▓ро╛роХ *ро░рпАрокрпНро│рпЗро╕рпН* роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН**. роЙродро╛ро░рогрооро╛роХ, ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН `form` роОройрпНро▒ роЖрокрпНроЬрпЖроХрпНроЯрпН роЗро░рпБроирпНродро╛ро▓рпН, роЕродрпИ роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНропро╛родрпАро░рпНроХро│рпН:

```js
// ЁЯЪй Don't mutate an object in state like this:
form.firstName = 'Taylor';
```

роЕродро▒рпНроХрпБ рокродро┐ро▓ро╛роХ, рокрпБродро┐роп роЖрокрпНроЬрпЖроХрпНроЯрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХро┐ роорпБро┤рпБро╡родрпИропрпБроорпН ро░рпАрокрпНро│рпЗро╕рпН роЪрпЖропрпНропро╡рпБроорпН:

```js
// тЬЕ Replace state with a new object
setForm({
  ...form,
  firstName: 'Taylor'
});
```

[ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ](/learn/updating-objects-in-state) рооро▒рпНро▒рпБроорпН [ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЕро░рпЗроХро│рпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ](/learn/updating-arrays-in-state) рокро▒рпНро▒ро┐ роорпЗро▓рпБроорпН рокроЯро┐роХрпНроХро╡рпБроорпН.

<Recipes titleText="ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЕро░рпЗроХро│рпН тАФ роЙродро╛ро░рогроЩрпНроХро│рпН" titleId="examples-objects">

#### рокроЯро┐ро╡роорпН (роЖрокрпНроЬрпЖроХрпНроЯрпН) {/*form-object*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, `form` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпН роТро░рпБ роЖрокрпНроЬрпЖроХрпНроЯрпИ ро╡рпИродрпНродро┐ро░рпБроХрпНроХро┐ро▒родрпБ. роТро╡рпНро╡рпКро░рпБ роЗройрпНрокрпБроЯро┐ро▒рпНроХрпБроорпН `setForm` роР роЕро┤рпИроХрпНроХрпБроорпН рооро╛ро▒рпНро▒ ро╣ро╛рогрпНроЯрпНро▓ро░рпН роЗро░рпБроХрпНроХрпБроорпН; роЕродрпБ роорпБро┤рпБ рокроЯро┐ро╡родрпНродро┐ройрпН роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕройрпБрокрпНрокрпБроорпН. `{ ...form }` роОройрпНро▒ ро╕рпНрокро┐ро░рпЖроЯрпБ роЪро┐рогрпНроЯро╛роХрпНро╕рпН, ро╕рпНроЯрпЗроЯрпН роЖрокрпНроЬрпЖроХрпНроЯрпН роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНропрокрпНрокроЯро╛рооро▓рпН ро░рпАрокрпНро│рпЗро╕рпН роЪрпЖропрпНропрокрпНрокроЯрпБро╡родрпИ роЙро▒рпБродро┐роЪрпЖропрпНроХро┐ро▒родрпБ.

<Sandpack>

```js
import { useState } from 'react';

export default function Form() {
  const [form, setForm] = useState({
    firstName: 'Barbara',
    lastName: 'Hepworth',
    email: 'bhepworth@sculpture.com',
  });

  return (
    <>
      <label>
        First name:
        <input
          value={form.firstName}
          onChange={e => {
            setForm({
              ...form,
              firstName: e.target.value
            });
          }}
        />
      </label>
      <label>
        Last name:
        <input
          value={form.lastName}
          onChange={e => {
            setForm({
              ...form,
              lastName: e.target.value
            });
          }}
        />
      </label>
      <label>
        Email:
        <input
          value={form.email}
          onChange={e => {
            setForm({
              ...form,
              email: e.target.value
            });
          }}
        />
      </label>
      <p>
        {form.firstName}{' '}
        {form.lastName}{' '}
        ({form.email})
      </p>
    </>
  );
}
```

```css
label { display: block; }
input { margin-left: 5px; }
```

</Sandpack>

<Solution />

#### рокроЯро┐ро╡роорпН (роирпЖро╕рпНроЯроЯрпН роЖрокрпНроЬрпЖроХрпНроЯрпН) {/*form-nested-object*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН ро╕рпНроЯрпЗроЯрпН роорпЗро▓рпБроорпН роирпЖро╕рпНроЯроЯрпН роЖроХ роЗро░рпБроХрпНроХро┐ро▒родрпБ. роирпЖро╕рпНроЯроЯрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроорпНрокрпЛродрпБ, роирпАроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроорпН роЖрокрпНроЬрпЖроХрпНроЯрпНроЯро┐ройрпН роироХро▓рпИ роЙро░рпБро╡ро╛роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН; роЕродрпИрокрпН тАЬроХрпКрогрпНроЯро┐ро░рпБроХрпНроХрпБроорпНтАЭ роорпЗро▓рпНроороЯрпНроЯ роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпБроХрпНроХрпБроорпН роироХро▓рпН родрпЗро╡рпИ. роорпЗро▓рпБроорпН роЕро▒ро┐роп [роирпЖро╕рпНроЯроЯрпН роЖрокрпНроЬрпЖроХрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ](/learn/updating-objects-in-state#updating-a-nested-object) рокроЯро┐роХрпНроХро╡рпБроорпН.

<Sandpack>

```js
import { useState } from 'react';

export default function Form() {
  const [person, setPerson] = useState({
    name: 'Niki de Saint Phalle',
    artwork: {
      title: 'Blue Nana',
      city: 'Hamburg',
      image: 'https://i.imgur.com/Sd1AgUOm.jpg',
    }
  });

  function handleNameChange(e) {
    setPerson({
      ...person,
      name: e.target.value
    });
  }

  function handleTitleChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        title: e.target.value
      }
    });
  }

  function handleCityChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        city: e.target.value
      }
    });
  }

  function handleImageChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        image: e.target.value
      }
    });
  }

  return (
    <>
      <label>
        Name:
        <input
          value={person.name}
          onChange={handleNameChange}
        />
      </label>
      <label>
        Title:
        <input
          value={person.artwork.title}
          onChange={handleTitleChange}
        />
      </label>
      <label>
        City:
        <input
          value={person.artwork.city}
          onChange={handleCityChange}
        />
      </label>
      <label>
        Image:
        <input
          value={person.artwork.image}
          onChange={handleImageChange}
        />
      </label>
      <p>
        <i>{person.artwork.title}</i>
        {' by '}
        {person.name}
        <br />
        (located in {person.artwork.city})
      </p>
      <img 
        src={person.artwork.image} 
        alt={person.artwork.title}
      />
    </>
  );
}
```

```css
label { display: block; }
input { margin-left: 5px; margin-bottom: 5px; }
img { width: 200px; height: 200px; }
```

</Sandpack>

<Solution />

#### рокроЯрпНроЯро┐ропро▓рпН (роЕро░рпЗ) {/*list-array*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, `todos` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпН роТро░рпБ роЕро░рпЗро╡рпИ ро╡рпИродрпНродро┐ро░рпБроХрпНроХро┐ро▒родрпБ. роТро╡рпНро╡рпКро░рпБ рокроЯрпНроЯройрпН ро╣ро╛рогрпНроЯрпНро▓ро░рпБроорпН роЕроирпНрод роЕро░рпЗро╡ро┐ройрпН роЕроЯрпБродрпНрод рокродро┐рокрпНрокрпБроЯройрпН `setTodos` роР роЕро┤рпИроХрпНроХрпБроорпН. `[...todos]` ро╕рпНрокро┐ро░рпЖроЯрпБ роЪро┐рогрпНроЯро╛роХрпНро╕рпН, `todos.map()` рооро▒рпНро▒рпБроорпН `todos.filter()` роЖроХро┐ропро╡рпИ ро╕рпНроЯрпЗроЯрпН роЕро░рпЗ роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНропрокрпНрокроЯро╛рооро▓рпН ро░рпАрокрпНро│рпЗро╕рпН роЪрпЖропрпНропрокрпНрокроЯрпБро╡родрпИ роЙро▒рпБродро┐роЪрпЖропрпНроХро┐ройрпНро▒рой.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import AddTodo from './AddTodo.js';
import TaskList from './TaskList.js';

let nextId = 3;
const initialTodos = [
  { id: 0, title: 'Buy milk', done: true },
  { id: 1, title: 'Eat tacos', done: false },
  { id: 2, title: 'Brew tea', done: false },
];

export default function TaskApp() {
  const [todos, setTodos] = useState(initialTodos);

  function handleAddTodo(title) {
    setTodos([
      ...todos,
      {
        id: nextId++,
        title: title,
        done: false
      }
    ]);
  }

  function handleChangeTodo(nextTodo) {
    setTodos(todos.map(t => {
      if (t.id === nextTodo.id) {
        return nextTodo;
      } else {
        return t;
      }
    }));
  }

  function handleDeleteTodo(todoId) {
    setTodos(
      todos.filter(t => t.id !== todoId)
    );
  }

  return (
    <>
      <AddTodo
        onAddTodo={handleAddTodo}
      />
      <TaskList
        todos={todos}
        onChangeTodo={handleChangeTodo}
        onDeleteTodo={handleDeleteTodo}
      />
    </>
  );
}
```

```js src/AddTodo.js
import { useState } from 'react';

export default function AddTodo({ onAddTodo }) {
  const [title, setTitle] = useState('');
  return (
    <>
      <input
        placeholder="Add todo"
        value={title}
        onChange={e => setTitle(e.target.value)}
      />
      <button onClick={() => {
        setTitle('');
        onAddTodo(title);
      }}>Add</button>
    </>
  )
}
```

```js src/TaskList.js
import { useState } from 'react';

export default function TaskList({
  todos,
  onChangeTodo,
  onDeleteTodo
}) {
  return (
    <ul>
      {todos.map(todo => (
        <li key={todo.id}>
          <Task
            todo={todo}
            onChange={onChangeTodo}
            onDelete={onDeleteTodo}
          />
        </li>
      ))}
    </ul>
  );
}

function Task({ todo, onChange, onDelete }) {
  const [isEditing, setIsEditing] = useState(false);
  let todoContent;
  if (isEditing) {
    todoContent = (
      <>
        <input
          value={todo.title}
          onChange={e => {
            onChange({
              ...todo,
              title: e.target.value
            });
          }} />
        <button onClick={() => setIsEditing(false)}>
          Save
        </button>
      </>
    );
  } else {
    todoContent = (
      <>
        {todo.title}
        <button onClick={() => setIsEditing(true)}>
          Edit
        </button>
      </>
    );
  }
  return (
    <label>
      <input
        type="checkbox"
        checked={todo.done}
        onChange={e => {
          onChange({
            ...todo,
            done: e.target.checked
          });
        }}
      />
      {todoContent}
      <button onClick={() => onDelete(todo.id)}>
        Delete
      </button>
    </label>
  );
}
```

```css
button { margin: 5px; }
li { list-style-type: none; }
ul, li { margin: 0; padding: 0; }
```

</Sandpack>

<Solution />

#### Immer роЙроЯройрпН роЪрпБро░рпБроХрпНроХрооро╛рой роЕрокрпНроЯрпЗроЯрпН ро▓ро╛роЬро┐роХрпН роОро┤рпБродрпБро╡родрпБ {/*writing-concise-update-logic-with-immer*/}

роорпНропрпВроЯрпНроЯрпЗро╖ройрпН роЗро▓рпНро▓ро╛рооро▓рпН роЕро░рпЗроХрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ роЪро┐ро░роорооро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, [Immer](https://github.com/immerjs/use-immer) рокрпЛройрпНро▒ ро▓рпИрокрпНро░ро░ро┐ропрпИ рокропройрпНрокроЯрпБродрпНродро┐ роорпАро│рпНроорпАрогрпНроЯрпБроорпН роОро┤рпБрод ро╡рпЗрогрпНроЯро┐роп роХрпЛроЯрпИ роХрпБро▒рпИроХрпНроХро▓ро╛роорпН. Immer, роирпАроЩрпНроХро│рпН роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИ роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНроХро┐ро▒рпАро░рпНроХро│рпН рокрпЛро▓ роЪрпБро░рпБроХрпНроХрооро╛роХ роОро┤рпБрод роЕройрпБроородро┐роХрпНроХрпБроорпН; роЖройро╛ро▓рпН роЙроЯрпНрокрпБро▒родрпНродро┐ро▓рпН роЕродрпБ роЗроорпНрооро┐ропрпВроЯрпНроЯрокро┐ро│рпН роЕрокрпНроЯрпЗроЯрпНроХро│рпИроЪрпН роЪрпЖропрпНроХро┐ро▒родрпБ:

<Sandpack>

```js
import { useState } from 'react';
import { useImmer } from 'use-immer';

let nextId = 3;
const initialList = [
  { id: 0, title: 'Big Bellies', seen: false },
  { id: 1, title: 'Lunar Landscape', seen: false },
  { id: 2, title: 'Terracotta Army', seen: true },
];

export default function BucketList() {
  const [list, updateList] = useImmer(initialList);

  function handleToggle(artworkId, nextSeen) {
    updateList(draft => {
      const artwork = draft.find(a =>
        a.id === artworkId
      );
      artwork.seen = nextSeen;
    });
  }

  return (
    <>
      <h1>Art Bucket List</h1>
      <h2>My list of art to see:</h2>
      <ItemList
        artworks={list}
        onToggle={handleToggle} />
    </>
  );
}

function ItemList({ artworks, onToggle }) {
  return (
    <ul>
      {artworks.map(artwork => (
        <li key={artwork.id}>
          <label>
            <input
              type="checkbox"
              checked={artwork.seen}
              onChange={e => {
                onToggle(
                  artwork.id,
                  e.target.checked
                );
              }}
            />
            {artwork.title}
          </label>
        </li>
      ))}
    </ul>
  );
}
```

```json package.json
{
  "dependencies": {
    "immer": "1.7.3",
    "react": "latest",
    "react-dom": "latest",
    "react-scripts": "latest",
    "use-immer": "0.5.1"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test --env=jsdom",
    "eject": "react-scripts eject"
  }
}
```

</Sandpack>

<Solution />

</Recipes>

---

### роЖро░роорпНрок ро╕рпНроЯрпЗроЯрпНроЯрпИ роорпАрогрпНроЯрпБроорпН роЙро░рпБро╡ро╛роХрпНроХрпБро╡родрпИродрпН родро╡ро┐ро░рпНрокрпНрокродрпБ {/*avoiding-recreating-the-initial-state*/}

ро░ро┐ропро╛роХрпНроЯрпН роЖро░роорпНрок ро╕рпНроЯрпЗроЯрпНроЯрпИ роТро░рпБроорпБро▒рпИ роЪрпЗрооро┐родрпНродрпБ, роЕроЯрпБродрпНрод ро░рпЖрогрпНроЯро░рпНроХро│ро┐ро▓рпН роЕродрпИ рокрпБро▒роХрпНроХрогро┐роХрпНроХро┐ро▒родрпБ.

```js
function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos());
  // ...
```

`createInitialTodos()` роЗройрпН ро╡ро┐ро│рпИро╡рпБ роЖро░роорпНрок ро░рпЖрогрпНроЯро░рпБроХрпНроХрпЗ родрпЗро╡рпИропро╛роХ роЗро░рпБроирпНродро╛ро▓рпБроорпН, роирпАроЩрпНроХро│рпН роТро╡рпНро╡рпКро░рпБ ро░рпЖрогрпНроЯро░ро┐ро▓рпБроорпН роЗроирпНрод роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИроХрпНроХро┐ро▒рпАро░рпНроХро│рпН. роЗродрпБ рокрпЖро░ро┐роп роЕро░рпЗроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХро┐ройро╛ро▓рпЛ, роЕродро┐роХ роЪрпЖро▓ро╡ро╛рой роХрогроХрпНроХрпАроЯрпБроХро│рпИроЪрпН роЪрпЖропрпНродро╛ро▓рпЛ ро╡рпАрогро╛роХрпБроорпН.

роЗродро▒рпНроХрпБ, роЕродрпИ `useState` роХрпНроХрпБ **роТро░рпБ _роЗройро┐ро╖ро▓рпИро╕ро░рпН_ роГрокроЩрпНроХрпНро╖ройро╛роХ** роЕройрпБрокрпНрокро▓ро╛роорпН:

```js
function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos);
  // ...
```

роЗроЩрпНроХрпЗ роирпАроЩрпНроХро│рпН роЕройрпБрокрпНрокрпБро╡родрпБ `createInitialTodos()` роЕро┤рпИрокрпНрокро┐ройрпН ро╡ро┐ро│рпИро╡рпБ роЕро▓рпНро▓; *роГрокроЩрпНроХрпНро╖ройрпН родро╛ройрпЗ* (`createInitialTodos`). роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИ `useState` роХрпНроХрпБ роЕройрпБрокрпНрокро┐ройро╛ро▓рпН, ро░ро┐ропро╛роХрпНроЯрпН роЕродрпИ роЗройро┐ро╖ро▓рпИро╕рпЗро╖ройрпН роЪрооропродрпНродро┐ро▓рпН роороЯрпНроЯрпБроорпЗ роЕро┤рпИроХрпНроХрпБроорпН.

роЯрпЖро╡ро▓рокрпНроорпЖрогрпНроЯро┐ро▓рпН, роЕро╡рпИ [рокро┐ропрпВро░рпН](/learn/keeping-components-pure) роОройрпНрокродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод ро░ро┐ропро╛роХрпНроЯрпН [роЙроЩрпНроХро│рпН роЗройро┐ро╖ро▓рпИро╕ро░рпНроХро│рпИ роЗро░рпБроорпБро▒рпИ роЕро┤рпИроХрпНроХро▓ро╛роорпН](#my-initializer-or-updater-function-runs-twice).

<Recipes titleText="The difference between passing an initializer and passing the initial state directly" titleId="examples-initializer">

#### роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпИ роЕройрпБрокрпНрокрпБро╡родрпБ {/*passing-the-initializer-function*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпН роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродро╛ро▓рпН, `createInitialTodos` роЗройро┐ро╖ро▓рпИро╕рпЗро╖ройрпН роЪрооропродрпНродро┐ро▓рпН роороЯрпНроЯрпБроорпН роУроЯрпБроорпН. роирпАроЩрпНроХро│рпН роЗройрпНрокрпБроЯро┐ро▓рпН родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНродро╛ро▓рпН рокрпЛройрпНро▒ ро░рпАро░рпЖрогрпНроЯро░рпНроХро│ро┐ро▓рпН роЕродрпБ роУроЯро╛родрпБ.

<Sandpack>

```js
import { useState } from 'react';

function createInitialTodos() {
  const initialTodos = [];
  for (let i = 0; i < 50; i++) {
    initialTodos.push({
      id: i,
      text: 'Item ' + (i + 1)
    });
  }
  return initialTodos;
}

export default function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos);
  const [text, setText] = useState('');

  return (
    <>
      <input
        value={text}
        onChange={e => setText(e.target.value)}
      />
      <button onClick={() => {
        setText('');
        setTodos([{
          id: todos.length,
          text: text
        }, ...todos]);
      }}>Add</button>
      <ul>
        {todos.map(item => (
          <li key={item.id}>
            {item.text}
          </li>
        ))}
      </ul>
    </>
  );
}
```

</Sandpack>

<Solution />

#### роЖро░роорпНрок ро╕рпНроЯрпЗроЯрпНроЯрпИ роирпЗро░роЯро┐ропро╛роХ роЕройрпБрокрпНрокрпБро╡родрпБ {/*passing-the-initial-state-directly*/}

роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпН **роЕройрпБрокрпНрокрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ**. роЕродройро╛ро▓рпН `createInitialTodos` роТро╡рпНро╡рпКро░рпБ ро░рпЖрогрпНроЯро░ро┐ро▓рпБроорпН (роЙродро╛: роирпАроЩрпНроХро│рпН роЗройрпНрокрпБроЯро┐ро▓рпН родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропрпБроорпНрокрпЛродрпБ) роУроЯрпБроорпН. роироЯродрпНродро┐ро▓рпН ро╡рпЗро▒рпБрокро╛роЯрпБ родрпЖро░ро┐ропро╛ро╡ро┐роЯрпНроЯро╛ро▓рпБроорпН, роЗроирпНрод роХрпЛроЯрпБ роХрпБро▒рпИродрпНродро┐ро▒ройрпБроЯрпИропродрпБ.

<Sandpack>

```js
import { useState } from 'react';

function createInitialTodos() {
  const initialTodos = [];
  for (let i = 0; i < 50; i++) {
    initialTodos.push({
      id: i,
      text: 'Item ' + (i + 1)
    });
  }
  return initialTodos;
}

export default function TodoList() {
  const [todos, setTodos] = useState(createInitialTodos());
  const [text, setText] = useState('');

  return (
    <>
      <input
        value={text}
        onChange={e => setText(e.target.value)}
      />
      <button onClick={() => {
        setText('');
        setTodos([{
          id: todos.length,
          text: text
        }, ...todos]);
      }}>Add</button>
      <ul>
        {todos.map(item => (
          <li key={item.id}>
            {item.text}
          </li>
        ))}
      </ul>
    </>
  );
}
```

</Sandpack>

<Solution />

</Recipes>

---

### `key` роорпВро▓роорпН ро╕рпНроЯрпЗроЯрпНроЯрпИ ро░рпАроЪрпЖроЯрпН роЪрпЖропрпНро╡родрпБ {/*resetting-state-with-a-key*/}

рокроЯрпНроЯро┐ропро▓рпИ [ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНро╡родро┐ро▓рпН](/learn/rendering-lists) `key` роЕроЯрпНро░ро┐рокрпНропрпВроЯрпНроЯрпИрокрпН рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН рокро╛ро░рпНроХрпНроХро▓ро╛роорпН. роЖройро╛ро▓рпН роЗродро▒рпНроХрпБ ро╡рпЗро▒рпБ роТро░рпБ рокропройрпБроорпН роЙрогрпНроЯрпБ.

роТро░рпБ роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯрпБроХрпНроХрпБ ро╡рпЗро▒рпБ `key` роТройрпНро▒рпИ роЕройрпБрокрпНрокрпБро╡родройрпН роорпВро▓роорпН роЕродройрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ **ро░рпАроЪрпЖроЯрпН** роЪрпЖропрпНропро▓ро╛роорпН. роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, Reset рокроЯрпНроЯройрпН `version` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ рооро╛ро▒рпНро▒рпБроХро┐ро▒родрпБ; роЕродрпИ `Form` роХрпНроХрпБ `key` роЖроХ роЕройрпБрокрпНрокрпБроХро┐ро▒рпЛроорпН. `key` рооро╛ро▒рпБроорпНрокрпЛродрпБ, ро░ро┐ропро╛роХрпНроЯрпН `Form` роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯрпИ (роЕродройрпН роЪрпИро▓рпНроЯрпБроХро│рпБроЯройрпН) рокрпБродро┐ропродро╛роХ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒родрпБ; роЗродройро╛ро▓рпН ро╕рпНроЯрпЗроЯрпН ро░рпАроЪрпЖроЯрпН роЖроХро┐ро▒родрпБ.

роорпЗро▓рпБроорпН роЕро▒ро┐роп [ро╕рпНроЯрпЗроЯрпНроЯрпИ роХро╛роХрпНроХро╡рпБроорпН/ро░рпАроЪрпЖроЯрпН роЪрпЖропрпНропро╡рпБроорпН](/learn/preserving-and-resetting-state) рокроЯро┐роХрпНроХро╡рпБроорпН.

<Sandpack>

```js src/App.js
import { useState } from 'react';

export default function App() {
  const [version, setVersion] = useState(0);

  function handleReset() {
    setVersion(version + 1);
  }

  return (
    <>
      <button onClick={handleReset}>Reset</button>
      <Form key={version} />
    </>
  );
}

function Form() {
  const [name, setName] = useState('Taylor');

  return (
    <>
      <input
        value={name}
        onChange={e => setName(e.target.value)}
      />
      <p>Hello, {name}.</p>
    </>
  );
}
```

```css
button { display: block; margin-bottom: 20px; }
```

</Sandpack>

---

### роорпБроирпНродрпИроп ро░рпЖрогрпНроЯро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ родроХро╡ро▓рпИроЪрпН роЪрпЗрооро┐рокрпНрокродрпБ {/*storing-information-from-previous-renders*/}

рокрпКродрпБро╡ро╛роХ, ро╕рпНроЯрпЗроЯрпНроЯрпИ роЗро╡рпЖройрпНроЯрпН ро╣ро╛рогрпНроЯрпНро▓ро░рпНроХро│ро┐ро▓рпН роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡рпАро░рпНроХро│рпН. роЖройро╛ро▓рпН роЕро░ро┐родро╛роХ, ро░рпЖрогрпНроЯро░ро┐роЩрпНроХрпБроХрпНроХрпБ рокродро┐ро▓ро│ро┐роХрпНроХ ро╕рпНроЯрпЗроЯрпНроЯрпИ роЪро░ро┐роЪрпЖропрпНроп ро╡рпЗрогрпНроЯро┐роп роиро┐ро▓рпИ ро╡ро░рпБроорпН тАФ роЙродро╛: роТро░рпБ рокрпНро░ро╛рокрпН рооро╛ро▒рпБроорпНрокрпЛродрпБ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ рооро╛ро▒рпНро▒ ро╡рпЗрогрпНроЯрпБрооро╛ройро╛ро▓рпН.

рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН, роЗродрпИродрпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ:

* **родрпЗро╡рпИропро╛рой роородро┐рокрпНрокрпБ родро▒рпНрокрпЛродрпИроп рокрпНро░ро╛рокрпНро╕рпН роЕро▓рпНро▓родрпБ ро╡рпЗро▒рпБ ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роорпБро┤рпБроорпИропро╛роХ роХрогроХрпНроХро┐роЯроХрпНроХрпВроЯро┐ропродро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, роЕроирпНрод роорпАродро┐ропро╛рой ро╕рпНроЯрпЗроЯрпНроЯрпИродрпН родро╛ройрпЗ [роирпАроХрпНроХро┐ро╡ро┐роЯрпБроЩрпНроХро│рпН.](/learn/choosing-the-state-structure#avoid-redundant-state)** роорпАрогрпНроЯрпБроорпН роорпАрогрпНроЯрпБроорпН роХрогроХрпНроХро┐роЯрпБро╡родрпБ роХрпБро▒ро┐родрпНродрпБ роХро╡ро▓рпИрокрпНрокроЯрпНроЯро╛ро▓рпН, [`useMemo` ро╣рпВроХрпН](/reference/react/useMemo) роЙродро╡рпБроорпН.
* роорпБро┤рпБ роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН роЯрпНро░рпАропро┐ройрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ ро░рпАроЪрпЖроЯрпН роЪрпЖропрпНроп [роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпБроХрпНроХрпБ ро╡рпЗро▒рпБ `key` роТройрпНро▒рпИ роЕройрпБрокрпНрокрпБроЩрпНроХро│рпН.](#resetting-state-with-a-key)
* роорпБроЯро┐роирпНродро╛ро▓рпН, родрпКроЯро░рпНрокрпБроЯрпИроп роЕройрпИродрпНродрпБ ро╕рпНроЯрпЗроЯрпНроЯрпИропрпБроорпН роЗро╡рпЖройрпНроЯрпН ро╣ро╛рогрпНроЯрпНро▓ро░рпНроХро│ро┐ро▓рпЗропрпЗ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН.

роорпЗро▒рпНроХрогрпНроЯро╡ро▒рпНро▒ро┐ро▓рпН роТройрпНро▒рпБроорпН рокрпКро░рпБроирпНродро╛род роЕро░ро┐родро╛рой роЪрпВро┤ро▓ро┐ро▓рпН, роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН ро░рпЖрогрпНроЯро░рпН роЖроХро┐роХрпНроХрпКрогрпНроЯро┐ро░рпБроХрпНроХрпБроорпН рокрпЛродрпБ `set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИродрпНродрпБ, роЗродрпБро╡ро░рпИ ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯ роородро┐рокрпНрокрпБроХро│рпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯрпБ ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропрпБроорпН роТро░рпБ рокро╛роЯро░рпНройрпИ рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.

роЗродрпЛ роТро░рпБ роЙродро╛ро░рогроорпН. роЗроирпНрод `CountLabel` роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН, роЕродро▒рпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН `count` рокрпНро░ро╛рокрпИ роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ:

```js src/CountLabel.js
export default function CountLabel({ count }) {
  return <h1>{count}</h1>
}
```

роХроЯроирпНрод рооро╛ро▒рпБродро▓ро┐ро▓ро┐ро░рпБроирпНродрпБ роХро╡рпБрогрпНроЯро░рпН *роЕродро┐роХро░ро┐родрпНродродро╛, роХрпБро▒рпИроирпНродродро╛* роОройрпНрокродрпИ роХро╛роЯрпНроЯ ро╡рпЗрогрпНроЯрпБроорпЖройрпНро▒ро╛ро▓рпН? `count` рокрпНро░ро╛рокрпН роЕродрпИ роЪрпКро▓рпНро▓ро╛родрпБ тАФ роЕродройрпН роорпБроирпНродрпИроп роородро┐рокрпНрокрпИ роирпАроЩрпНроХро│рпН роиро┐ройрпИро╡ро┐ро▓рпН ро╡рпИродрпНродро┐ро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЕродрпИроХрпН роХрогрпНроХро╛рогро┐роХрпНроХ `prevCount` роОройрпНро▒ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН. роорпЗро▓рпБроорпН, роЕродро┐роХро░ро┐родрпНродродро╛ роХрпБро▒рпИроирпНродродро╛ роОройрпНрокродрпИроХрпН роХро╛роЯрпНроЯ `trend` роОройрпНро▒ рооро▒рпНро▒рпКро░рпБ ро╕рпНроЯрпЗроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН. `prevCount` рооро▒рпНро▒рпБроорпН `count` роР роТрокрпНрокро┐роЯрпНроЯрпБ, роТродрпНродро┐ро▓рпНро▓рпИропрпЖройро┐ро▓рпН роЗро░рогрпНроЯрпИропрпБроорпН роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропро╡рпБроорпН. роЗрокрпНрокрпЛродрпБ родро▒рпНрокрпЛродрпИроп count рокрпНро░ро╛рокрпИропрпБроорпН, роЕродрпБ *роХроЯроирпНрод ро░рпЖрогрпНроЯро░ро┐ро▓ро┐ро░рпБроирпНродрпБ роОро╡рпНро╡ро╛ро▒рпБ рооро╛ро▒ро┐ропродрпБ* роОройрпНрокродрпИропрпБроорпН роХро╛роЯрпНроЯ роорпБроЯро┐ропрпБроорпН.

<Sandpack>

```js src/App.js
import { useState } from 'react';
import CountLabel from './CountLabel.js';

export default function App() {
  const [count, setCount] = useState(0);
  return (
    <>
      <button onClick={() => setCount(count + 1)}>
        Increment
      </button>
      <button onClick={() => setCount(count - 1)}>
        Decrement
      </button>
      <CountLabel count={count} />
    </>
  );
}
```

```js src/CountLabel.js active
import { useState } from 'react';

export default function CountLabel({ count }) {
  const [prevCount, setPrevCount] = useState(count);
  const [trend, setTrend] = useState(null);
  if (prevCount !== count) {
    setPrevCount(count);
    setTrend(count > prevCount ? 'increasing' : 'decreasing');
  }
  return (
    <>
      <h1>{count}</h1>
      {trend && <p>The count is {trend}</p>}
    </>
  );
}
```

```css
button { margin-bottom: 10px; }
```

</Sandpack>

роХрпБро▒ро┐рокрпНрокрпБ: ро░рпЖрогрпНроЯро░ро┐роЩрпН роЪрооропродрпНродро┐ро▓рпН `set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИродрпНродро╛ро▓рпН, роЕродрпБ `prevCount !== count` рокрпЛройрпНро▒ роХрогрпНроЯро┐ро╖ройрпН роЙро│рпНро│рпЗропрпЗ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН; роорпЗро▓рпБроорпН роЕроирпНрод роХрогрпНроЯро┐ро╖ройрпБроХрпНроХрпБро│рпН `setPrevCount(count)` рокрпЛройрпНро▒ роЕро┤рпИрокрпНрокрпБроорпН роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН, роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН родрпКроЯро░рпНроЪрпНроЪро┐ропро╛роХ ро░рпАро░рпЖрогрпНроЯро░рпН роЖроХро┐ роХрпНро░ро╛ро╖рпН роЖроХрпБроорпН. роорпЗро▓рпБроорпН, роЗро╡рпНро╡ро╛ро▒рпБ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНроп роЗропро▓рпНро╡родрпБ *родро▒рпНрокрпЛродрпБ ро░рпЖрогрпНроЯро░рпН роЖроХрпБроорпН* роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯро┐ройрпН ро╕рпНроЯрпЗроЯрпНроЯрпИропрпЗ. ро░рпЖрогрпНроЯро░ро┐роЩрпН роЪрооропродрпНродро┐ро▓рпН *ро╡рпЗро▒рпБ* роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроЯро┐ройрпН `set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИрокрпНрокродрпБ рокро┐ро┤рпИ. роХроЯрпИроЪро┐ропро╛роХ, роЙроЩрпНроХро│рпН `set` роЕро┤рпИрокрпНрокрпБ роЗройрпНройрпБроорпН [роорпНропрпВроЯрпНроЯрпЗро╖ройрпН роЗро▓рпНро▓ро╛рооро▓рпН ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНропро╡рпЗ](#updating-objects-and-arrays-in-state) ро╡рпЗрогрпНроЯрпБроорпН тАФ роЗродрпБ [рокро┐ропрпВро░рпН роГрокроЩрпНроХрпНро╖ройрпНроХро│ро┐ройрпН](/learn/keeping-components-pure) ро╡ро┐родро┐роХро│рпИ роорпАро▒ро▓ро╛роорпН роОройрпНрокродро▓рпНро▓.

роЗроирпНрод рокро╛роЯро░рпНройрпИ рокрпБро░ро┐роирпНродрпБ роХрпКро│рпНро╡родрпБ роЪро▒рпНро▒рпБ роХроЯро┐ройроорпН; рокрпКродрпБро╡ро╛роХродрпН родро╡ро┐ро░рпНрокрпНрокродрпЗ роиро▓рпНро▓родрпБ. роЗро░рпБроирпНродро╛ро▓рпБроорпН, роЗродрпБ Effect-ро▓рпН ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпИроХрпН роХро╛роЯрпНроЯро┐ро▓рпБроорпН роорпЗро▓рпН. ро░рпЖрогрпНроЯро░ро┐роЩрпН роЪрооропродрпНродро┐ро▓рпН `set` роЕро┤рпИродрпНродро╛ро▓рпН, роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН `return` роЖройро╡рпБроЯройрпН роЙроЯройрпЗ (роЪрпИро▓рпНроЯрпНроХро│рпИ ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНропрпБроорпН роорпБройрпНройро░рпН) ро░ро┐ропро╛роХрпНроЯрпН роЕродрпИ роорпАрогрпНроЯрпБроорпН ро░рпЖрогрпНроЯро░рпН роЪрпЖропрпНропрпБроорпН. роЗродройро╛ро▓рпН роЪрпИро▓рпНроЯрпНроХро│рпН роЗро░рогрпНроЯрпБ роорпБро▒рпИ ро░рпЖрогрпНроЯро░рпН роЖроХ ро╡рпЗрогрпНроЯро┐ропродро┐ро▓рпНро▓рпИ. роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН роГрокроЩрпНроХрпНро╖ройро┐ройрпН роорпАродро┐ропрпЖро▓рпНро▓ро╛роорпН роУроЯрпБроорпН (роЖройро╛ро▓рпН роЕродройрпН ро╡ро┐ро│рпИро╡рпБ родрпВроХрпНроХро┐ роОро▒ро┐ропрокрпНрокроЯрпБроорпН). роЙроЩрпНроХро│рпН роХрогрпНроЯро┐ро╖ройрпН роОро▓рпНро▓ро╛ ро╣рпВроХрпН роЕро┤рпИрокрпНрокрпБроХро│рпБроХрпНроХрпБроорпН роХрпАро┤рпЗ роЗро░рпБроирпНродро╛ро▓рпН, родрпКроЯроХрпНроХродрпНродро┐ро▓рпЗропрпЗ `return;` роТройрпНро▒рпИ роЪрпЗро░рпНродрпНродрпБ ро░рпЖрогрпНроЯро░ро┐роЩрпНроХрпИ роорпАрогрпНроЯрпБроорпН роЖро░роорпНрокро┐роХрпНроХро▓ро╛роорпН.

---

## рокро┤рпБродрпБ рокро╛ро░рпНродрпНродро▓рпН {/*troubleshooting*/}

### роиро╛ройрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНродрпЗройрпН, роЖройро╛ро▓рпН ро▓рпЛроХро┐ро▓рпН рокро┤рпИроп роородро┐рокрпНрокрпБ родро╛ройрпН ро╡ро░рпБроХро┐ро▒родрпБ {/*ive-updated-the-state-but-logging-gives-me-the-old-value*/}

`set` роГрокроЩрпНроХрпНро╖ройрпИ роЕро┤рпИрокрпНрокродрпБ **роУроЯро┐роХрпНроХрпКрогрпНроЯро┐ро░рпБроХрпНроХрпБроорпН роХрпЛроЯро┐ро▓рпН ро╕рпНроЯрпЗроЯрпНроЯрпИ рооро╛ро▒рпНро▒ро╛родрпБ**:

```js {4,5,8}
function handleClick() {
  console.log(count);  // 0

  setCount(count + 1); // Request a re-render with 1
  console.log(count);  // Still 0!

  setTimeout(() => {
    console.log(count); // Also 0!
  }, 5000);
}
```

роЗродрпБ [ро╕рпНроЯрпЗроЯрпН роТро░рпБ ро╕рпНроиро╛рокрпНро╖ро╛роЯрпН рокрпЛро▓ роироЯрокрпНрокродройро╛ро▓рпН](/learn/state-as-a-snapshot). ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родрпБ рокрпБродро┐роп ро╕рпНроЯрпЗроЯрпНроЯрпБроЯройрпН роЗройрпНройрпКро░рпБ ро░рпЖрогрпНроЯро░рпИ роХрпЛро░рпБро╡родрпБродро╛ройрпН; роПро▒рпНроХройро╡рпЗ роЗропроЩрпНроХрпБроорпН роЗроирпНрод роЗро╡рпЖройрпНроЯрпН ро╣ро╛рогрпНроЯрпНро▓ро░ро┐ро▓рпН роЙро│рпНро│ `count` роЬро╛ро╡ро╛ро╕рпНроХро┐ро░ро┐рокрпНроЯрпН ро╡рпЖро░ро┐ропрокро┐ро│рпИ роЕродрпБ рокро╛родро┐роХрпНроХро╛родрпБ.

роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпНроЯрпИ рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпЖройро┐ро▓рпН, роЕродрпИ `set` роХрпНроХрпБ роЕройрпБрокрпНрокрпБро╡родро▒рпНроХрпБ роорпБройрпН роТро░рпБ ро╡рпЖро░ро┐ропрокро┐ро│ро┐ро▓рпН роЪрпЗрооро┐роХрпНроХро▓ро╛роорпН:

```js
const nextCount = count + 1;
setCount(nextCount);

console.log(count);     // 0
console.log(nextCount); // 1
```

---

### роиро╛ройрпН ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНродрпЗройрпН, роЖройро╛ро▓рпН родро┐ро░рпИ роЕрокрпНроЯрпЗроЯрпН роЖроХро╡ро┐ро▓рпНро▓рпИ {/*ive-updated-the-state-but-the-screen-doesnt-update*/}

[`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) роТрокрпНрокрпАроЯрпНроЯро┐ройрпНрокроЯро┐ **роЕроЯрпБродрпНрод ро╕рпНроЯрпЗроЯрпН роорпБроирпНродрпИроп ро╕рпНроЯрпЗроЯрпНроЯрпБроХрпНроХрпБ роЪроорооро╛роХ роЗро░рпБроирпНродро╛ро▓рпН**, ро░ро┐ропро╛роХрпНроЯрпН роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯрпНроЯрпИ рокрпБро▒роХрпНроХрогро┐роХрпНроХрпБроорпН. роЗродрпБ рокрпКродрпБро╡ро╛роХ ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЙро│рпНро│ роЖрокрпНроЬрпЖроХрпНроЯрпН роЕро▓рпНро▓родрпБ роЕро░рпЗро╡рпИ роирпЗро░роЯро┐ропро╛роХ рооро╛ро▒рпНро▒рпБроорпНрокрпЛродрпБ роироЯроХрпНроХрпБроорпН:

```js
obj.x = 10;  // ЁЯЪй Wrong: mutating existing object
setObj(obj); // ЁЯЪй Doesn't do anything
```

роирпАроЩрпНроХро│рпН роЗро░рпБроХрпНроХрпБроорпН `obj` роЖрокрпНроЬрпЖроХрпНроЯрпИ роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНродрпБ роЕродрпИ роорпАрогрпНроЯрпБроорпН `setObj` роХрпНроХрпБ роЕройрпБрокрпНрокро┐ропродро╛ро▓рпН, ро░ро┐ропро╛роХрпНроЯрпН роЕрокрпНроЯрпЗроЯрпНроЯрпИ рокрпБро▒роХрпНроХрогро┐родрпНродродрпБ. роЗродрпИ роЪро░ро┐ роЪрпЖропрпНроп, ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЙро│рпНро│ роЖрокрпНроЬрпЖроХрпНроЯрпНроХро│рпИропрпБроорпН роЕро░рпЗроХро│рпИропрпБроорпН роОрокрпНрокрпЛродрпБроорпН [_роорпНропрпВроЯрпНроЯрпЗроЯрпН_ роЪрпЖропрпНропро╛рооро▓рпН _ро░рпАрокрпНро│рпЗро╕рпН_](#updating-objects-and-arrays-in-state) роЪрпЖропрпНро╡родрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН:

```js
// тЬЕ Correct: creating a new object
setObj({
  ...obj,
  x: 10
});
```

---

### роОройроХрпНроХрпБ тАЬToo many re-rendersтАЭ роОройрпНро▒ рокро┐ро┤рпИ ро╡ро░рпБроХро┐ро▒родрпБ {/*im-getting-an-error-too-many-re-renders*/}

роЗроирпНрод рооро╛родро┐ро░ро┐ роТро░рпБ рокро┐ро┤рпИ ро╡роирпНродрпБроХро┐роЯрпИроХрпНроХрпБроорпН: `Too many re-renders. React limits the number of renders to prevent an infinite loop.` рокрпКродрпБро╡ро╛роХ, роирпАроЩрпНроХро│рпН ро░рпЖрогрпНроЯро░ро┐роЩрпН роЪрооропродрпНродро┐ро▓рпН роХрогрпНроЯро┐ро╖ройрпН роЗро▓рпНро▓ро╛рооро▓рпН ро╕рпНроЯрпЗроЯрпНроЯрпИ роЕроорпИродрпНродрпБро╡ро┐роЯрпНроЯрпАро░рпНроХро│рпН роОройрпНрокродрпИроХрпН роХрпБро▒ро┐роХрпНроХрпБроорпН. роЗродройро╛ро▓рпН роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН ро▓рпВрокрпНрокро┐ро▓рпН роЪро┐роХрпНроХро┐ ро╡ро┐роЯрпБроорпН: render тЖТ set state (render) тЖТ render тЖТ set state (render) ... рокрпЛройрпНро▒родро╛роХ. роЗродрпБ рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН роЗро╡рпЖройрпНроЯрпН ро╣ро╛рогрпНроЯрпНро▓ро░рпИ роХрпБро▒ро┐рокрпНрокро┐роЯрпБроорпН роорпБро▒рпИропро┐ро▓рпН роЙро│рпНро│ родро╡ро▒ро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН:

```js {1-2}
// ЁЯЪй Wrong: calls the handler during render
return <button onClick={handleClick()}>Click me</button>

// тЬЕ Correct: passes down the event handler
return <button onClick={handleClick}>Click me</button>

// тЬЕ Correct: passes down an inline function
return <button onClick={(e) => handleClick(e)}>Click me</button>
```

роЗроирпНрод рокро┐ро┤рпИропро┐ройрпН роХро╛ро░рогродрпНродрпИ роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ роОройрпНро▒ро╛ро▓рпН, роХро╛ройрпНроЪрпЛро▓ро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН рокро┐ро┤рпИ роЕро░рпБроХрпЗ роЙро│рпНро│ роЕроорпНрокрпИ роЪрпКроЯрпБроХрпНроХро┐, роЬро╛ро╡ро╛ро╕рпНроХро┐ро░ро┐рокрпНроЯрпН ро╕рпНроЯро╛роХрпНроХро┐ро▓рпН роОроирпНрод `set` роЕро┤рпИрокрпНрокрпЗ роХро╛ро░рогроорпЖройродрпН родрпЗроЯрпБроЩрпНроХро│рпН.

---

### роОройрпН роЗройро┐ро╖ро▓рпИро╕ро░рпН роЕро▓рпНро▓родрпБ роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпН роЗро░рогрпНроЯрпБ роорпБро▒рпИ роУроЯрпБроХро┐ро▒родрпБ {/*my-initializer-or-updater-function-runs-twice*/}

[ро╕рпНроЯрпНро░ро┐роХрпНроЯрпН роорпЛроЯро┐ро▓рпН](/reference/react/StrictMode), ро░ро┐ропро╛роХрпНроЯрпН роЪро┐ро▓ роГрокроЩрпНроХрпНро╖ройрпНроХро│рпИ роТро░рпБроорпБро▒рпИ рокродро┐ро▓ро╛роХ роЗро░рогрпНроЯрпБ роорпБро▒рпИ роЕро┤рпИроХрпНроХрпБроорпН:

```js {2,5-6,11-12}
function TodoList() {
  // This component function will run twice for every render.

  const [todos, setTodos] = useState(() => {
    // This initializer function will run twice during initialization.
    return createTodos();
  });

  function handleClick() {
    setTodos(prevTodos => {
      // This updater function will run twice for every click.
      return [...prevTodos, createTodo()];
    });
  }
  // ...
```

роЗродрпБ роОродро┐ро░рпНрокро╛ро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпЗ; роЙроЩрпНроХро│рпН роХрпЛроЯрпИ роХрпЖроЯрпБрокрпНрокродро┐ро▓рпНро▓рпИ.

роЗроирпНрод роироЯродрпНродрпИ **роЯрпЖро╡ро▓рокрпНроорпЖрогрпНроЯро┐ро▓рпН роороЯрпНроЯрпБроорпН** роироЯроХрпНроХрпБроорпН; роЗродрпБ [роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроХро│рпИ рокро┐ропрпВро░рпН ро╡рпИродрпНродро┐ро░рпБроХрпНроХ](/learn/keeping-components-pure) роЙродро╡рпБроХро┐ро▒родрпБ. ро░ро┐ропро╛роХрпНроЯрпН роЗро░рогрпНроЯрпБ роЕро┤рпИрокрпНрокрпБроХро│ро┐ро▓рпН роТройрпНро▒ро┐ройрпН ро╡ро┐ро│рпИро╡рпИропрпЗ рокропройрпНрокроЯрпБродрпНродро┐, рооро▒рпНро▒родрпИроХрпН роХро╡ройро┐роХрпНроХро╛родрпБ. роЙроЩрпНроХро│рпН роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН, роЗройро┐ро╖ро▓рпИро╕ро░рпН, роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпНроХро│рпН рокро┐ропрпВро░рпН роЖроХ роЗро░рпБроирпНродро╛ро▓рпН, роЙроЩрпНроХро│рпН ро▓ро╛роЬро┐роХрпН рокро╛родро┐роХрпНроХрокрпНрокроЯро╛родрпБ. родро╡ро▒рпБродро▓ро╛роХ роЗроорпНрокрпНропрпВро░рпН роЖроХ роЗро░рпБроирпНродро╛ро▓рпН, роЗроирпНрод роироЯродрпНродрпИ роЕро╡ро▒рпНро▒рпИ рокрпБро▓рокрпНрокроЯрпБродрпНрод роЙродро╡рпБроорпН.

роЙродро╛ро░рогрооро╛роХ, роЗроирпНрод роЗроорпНрокрпНропрпВро░рпН роЕрокрпНроЯрпЗроЯро░рпН ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЙро│рпНро│ роТро░рпБ роЕро░рпЗро╡рпИ роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНроХро┐ро▒родрпБ:

```js {2,3}
setTodos(prevTodos => {
  // ЁЯЪй Mistake: mutating state
  prevTodos.push(createTodo());
});
```

ро░ро┐ропро╛роХрпНроЯрпН роЙроЩрпНроХро│рпН роЕрокрпНроЯрпЗроЯро░рпИ роЗро░рогрпНроЯрпБ роорпБро▒рпИ роЕро┤рпИроХрпНроХрпБроорпН рокрпЛродрпБ, todo роЗро░рогрпНроЯрпБ роорпБро▒рпИ роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯро┐ро░рпБрокрпНрокродрпИрокрпН рокро╛ро░рпНроХрпНроХро▓ро╛роорпН; роЗродройро╛ро▓рпН рокро┐ро┤рпИ роЗро░рпБрокрпНрокродрпБ рокрпБро░ро┐ропрпБроорпН. роЗроирпНрод роЙродро╛ро░рогродрпНродро┐ро▓рпН, [роЕро░рпЗро╡рпИ роорпНропрпВроЯрпНроЯрпЗроЯрпН роЪрпЖропрпНро╡родро▒рпНроХрпБ рокродро┐ро▓ро╛роХ ро░рпАрокрпНро│рпЗро╕рпН роЪрпЖропрпНро╡родройрпН роорпВро▓роорпН](#updating-objects-and-arrays-in-state) рокро┐ро┤рпИропрпИ роЪро░ро┐ роЪрпЖропрпНропро▓ро╛роорпН:

```js {2,3}
setTodos(prevTodos => {
  // тЬЕ Correct: replacing with new state
  return [...prevTodos, createTodo()];
});
```

роЗрокрпНрокрпЛродрпБ роЗроирпНрод роЕрокрпНроЯрпЗроЯро░рпН рокро┐ропрпВро░рпН роЖройродро╛ро▓рпН, роЕродрпИ роТро░рпБ роорпБро▒рпИ роХрпВроЯрпБродро▓ро╛роХ роЕро┤рпИродрпНродро╛ро▓рпБроорпН роироЯродрпНродро┐ро▓рпН рооро╛ро▒рпНро▒роорпН роЗро▓рпНро▓рпИ. роЕродройро╛ро▓рпНродро╛ройрпН ро░ро┐ропро╛роХрпНроЯрпН роЗро░рпБроорпБро▒рпИ роЕро┤рпИрокрпНрокродрпБ рокро┐ро┤рпИроХро│рпИ роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХ роЙродро╡рпБроХро┐ро▒родрпБ. **рокро┐ропрпВро░рпН роЖроХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯро┐ропродрпБ роХро╛роорпНрокрпЛройрпЖройрпНроЯрпН, роЗройро┐ро╖ро▓рпИро╕ро░рпН, роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпНроХро│рпЗ.** роЗро╡рпЖройрпНроЯрпН ро╣ро╛рогрпНроЯрпНро▓ро░рпНроХро│рпН рокро┐ропрпВро░рпН роЖроХ ро╡рпЗрогрпНроЯро┐ропродро┐ро▓рпНро▓рпИ; ро░ро┐ропро╛роХрпНроЯрпН роЕро╡ро▒рпНро▒рпИ роЗро░рпБроорпБро▒рпИ роЕро┤рпИроХрпНроХро╛родрпБ.

роорпЗро▓рпБроорпН роЕро▒ро┐роп [роХро╛роорпНрокрпЛройрпЖройрпНроЯрпНроХро│рпИ рокро┐ропрпВро░рпН ро╡рпИродрпНродро┐ро░рпБрокрпНрокродрпБ](/learn/keeping-components-pure) рокроЯро┐роХрпНроХро╡рпБроорпН.

---

### роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИ ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН ро╡рпИроХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒рпЗройрпН, роЖройро╛ро▓рпН роЕродрпБ роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ {/*im-trying-to-set-state-to-a-function-but-it-gets-called-instead*/}

роЗрокрпНрокроЯро┐ роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИ ро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН ро╡рпИроХрпНроХ роорпБроЯро┐ропро╛родрпБ:

```js
const [fn, setFn] = useState(someFunction);

function handleClick() {
  setFn(someOtherFunction);
}
```

роирпАроЩрпНроХро│рпН роГрокроЩрпНроХрпНро╖ройрпИ роЕройрпБрокрпНрокрпБро╡родро╛ро▓рпН, `someFunction` роР ро░ро┐ропро╛роХрпНроЯрпН [роЗройро┐ро╖ро▓рпИро╕ро░рпН роГрокроЩрпНроХрпНро╖ройрпН](#avoiding-recreating-the-initial-state) роОройрпНро▒рпБроорпН, `someOtherFunction` роР [роЕрокрпНроЯрпЗроЯро░рпН роГрокроЩрпНроХрпНро╖ройрпН](#updating-state-based-on-the-previous-state) роОройрпНро▒рпБроорпН роХро░рпБродрпБроорпН; роЕродройро╛ро▓рпН роЕро╡ро▒рпНро▒рпИ роЕро┤рпИродрпНродрпБ ро╡ро┐ро│рпИро╡рпБроХро│рпИроЪрпН роЪрпЗрооро┐роХрпНроХ роорпБропро▓рпБроорпН. роЙрогрпНроорпИропро┐ро▓рпН роТро░рпБ роГрокроЩрпНроХрпНро╖ройрпИ *роЪрпЗрооро┐роХрпНроХ*, роЗро░рогрпНроЯро┐ро▓рпБроорпН роорпБройрпНройро╛ро▓рпН `() =>` роЪрпЗро░рпНроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЕрокрпНрокрпЛродрпБ ро░ро┐ропро╛роХрпНроЯрпН роирпАроЩрпНроХро│рпН роЕройрпБрокрпНрокрпБроорпН роГрокроЩрпНроХрпНро╖ройрпНроХро│рпИроЪрпН роЪрпЗрооро┐роХрпНроХрпБроорпН.

```js {1,4}
const [fn, setFn] = useState(() => someFunction);

function handleClick() {
  setFn(() => someOtherFunction);
}
```
